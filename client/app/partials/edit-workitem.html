<div ng-include src="'partials/project-nav.html'"></div>

<form class="form-horizontal" ng-submit="updateWorkItem()">
  <fieldset>
    <legend>{{type}} Work Item</legend>

    <div class="span5">
      <div class="control-group">
        <label class="control-label span2" for="inputTitle">Title:</label>
        <div class="controls">
          <input type="text" id="inputTitle" ng-model="workItem.title" />
        </div>
      </div>
      <div class="control-group">
        <label class="control-label span2" for="inputDescription">Description:</label>
        <div class="controls">
          <input type="text" id="inputDescription" ng-model="workItem.description" />
        </div>
      </div>
      <div class="control-group">
        <label class="control-label span2" for="inputPriority">Priority:</label>
        <div class="controls">
          <input type="text" id="inputPriority" ng-model="workItem.priority" />
        </div>
      </div>
      <div class="control-group">
        <label class="control-label span2" for="inputWorkPackages">Work Packages:</label>
        <div class="nullable">
          <select id="{{workPackages + '-menu'}}" ng-change="workPackagesAdd(workPackage)"
            ng-model="workPackagesAddChosen" ng-options="workPackage.title for workPackage in workPackagesList">
            <option value="">-- Add a Work Package --</option>
          </select>
        </div>
        <div class="info-small span3 pull-right workPackage" id="{{workPackage.id}}" ng-repeat="workPackage in workItem.workPackages">
          <a href="#/projects/{{project.id}}/work-packages/{{workPackage.id}}">{{workPackage.title}}
          </a>
          <a ng-click="workPackagesRemove(workPackage)"><i class="icon-remove-circle"></i></a>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label span2" for="inputAssignedUsers">Assigned Users:</label>
        <div class="nullable">
          <select id="{{assignedUsers + '-menu'}}" ng-change="assignedUsersAdd(assigned)"
            ng-model="assignedUsersAddChosen" ng-options="assigned.username + ': ' + assigned.firstName + ' ' + assigned.lastName for assigned in usersList">
            <option value="">-- Assign a User --</option>
          </select>
        </div>
        <div class="info-small span3 pull-right assigned" id="{{assigned.id}}" ng-repeat="assigned in workItem.assignedUsers">
          <a href="#/users/{{assigned._id}}">{{assigned.username}}: {{assigned.firstName}} {{assigned.lastName}}
          </a>
          <a ng-click="assignedUsersRemove(assigned)"><i class="icon-remove-circle"></i></a>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label span2" for="inputDependencies">Dependencies:</label>
        <div class="nullable">
          <select id="{{dependencies + '-menu'}}" ng-change="dependenciesAdd(dependency)"
            ng-model="dependenciesAddChosen" ng-options="dependency.title for dependency in dependenciesList">
            <option value="">-- Add a Dependency --</option>
          </select>
        </div>
        <div class="info-small span3 pull-right dependency" id="{{dependency.id}}" ng-repeat="dependency in workItem.dependencies">
          <a href="#/projects/{{project.id}}/work-items/{{dependency.id}}">{{dependency.title}}
          </a>
          <a ng-click="dependenciesRemove(dependency)"><i class="icon-remove-circle"></i></a>
        </div>
      </div>
    </div>

    <div class="span5">
      <div class="control-group">
        <label class="control-label span2" for="inputTimeEstimate">Time Estimate:</label>
        <div class="controls">
          <input type="text" id="inputTimeEstimate" ng-model="workItem.timeEstimate" />
        </div>
      </div>
      <div class="control-group">
        <label class="control-label span2" for="inputTimeSpent">Time Spent:</label>
        <div class="controls">
          <input type="text" id="inputTimeSpent" ng-model="workItem.timeSpent" />
        </div>
      </div>
      <div class="control-group">
        <label class="control-label span2" for="inputCompletionPercentage">Completion:</label>
        <div class="controls">
          <input type="text" id="inputCompletionPercentage" ng-model="workItem.completionPercentage" />
        </div>
      </div>
      <div class="control-group">
        <label class="control-label span2" for="inputStatus">Status:</label>
        <div class="controls">
          <select id="inputStatus" ng-model="workItem.status">
            <option value="open">Open</option>
            <option value="late">Late</option>
            <option value="closed">Closed</option>
          </select>
        </div>
      </div>
    </div>

  </fieldset>

  <div style="float: none;" class="form-actions">
    <button type="submit" class="btn">{{submitType}}</button>
  </div>
</form>