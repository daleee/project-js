<div ng-include src="'partials/project-nav.html'"></div>

<div>
  <a class="btn" href="#/projects/{{project.id}}/add-work-item">
    Add Work Item
  </a>
  <form class="form-inline pull-right">
    Search: <input class="input-medium" ng-model="wkFilter.title"></input>
  </form>

  <br />
  <br />

  <table class="table table-condensed table-striped table-bordered">
    <thead>
    <tr>
      <th></th>
      <th><a href="" ng-click="predicate = 'title'; reverse=!reverse">Title</a></th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="workItem in workItems | filter:wkFilter | orderBy:predicate:reverse">
      <td>
        <a href="#/projects/{{project.id}}/work-items/{{workItem.id}}/edit">Edit</a>
      </td>

      <td>
        <a href="#/projects/{{project.id}}/work-items/{{workItem.id}}/view"><b>{{workItem.title}}</b></a>
        <div>{{workItem.description}}</div>
        <p class="pull-left info-small span3">by: 
          <a href="#/users/{{workItem.lastModifiedBy}}">Username</a> on {{workItem.lastModifiedDate | date:'yy/MM/dd'}} 
        </p>
        <table class="span10">
          <tr>
            <td class="span1">
              <span class="label {{workItem.status.labelType}}">{{workItem.status.text}}</span>
            </td>
            <td class="span10">
              <div class="progress span10"><div class="bar" style="width: {{workItem.completionPercentage}}%;"></div></div>
            </td>
          </tr>
        </table>

      </td>
    </tr>
    </tbody>
  </table>

</div>